{% extends "base.html.twig" %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('assets/client_website/css/tvShow_details.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/shared_assets/css/jquery.dataTables.min.css') }}" />
{% endblock %}

{% block body_content %}
	<div class="container">
		<!-- Page Heading/Breadcrumbs -->
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">{{ tvShow.title }}
					{% if next_recordings %}
						<small><span class="label label-success">En cours de tournage</span></small>
					{% else %}
						<small><span class="label label-warning">Aucun tournage de prévue</span></small>
					{% endif %}
				</h1>
				<ol class="breadcrumb">
					<li><a href="{{ path('home') }}">Accueil</a>
					</li>
					<li><a href="{{ path('tvshows') }}">Toutes nos émissions</a>
					</li>
					<li class="active">{{ tvShow.title }}</li>
				</ol>
			</div>
		</div>
		<div class="row">
			<div class="col-md-6 vcenter">
				<img class="img-responsive center-block" src="{{ asset('uploads/' ~ tvShow.iconeName) }}" alt="">
			</div><!--
		--><div class="col-md-6 vcenter">
		<h2>A propos de l'emission</h2>
		{{ tvShow.description | raw }}
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<h2 class="page-header">Les dates de tournages</h2>
		<table id="events_calendar" class="display" cellspacing="0" width="100%">
			<thead>
				<tr>
					<th>Date</th>
					<th>Heure de début</th>
					<th>Heure de fin</th>
					<th>Condition</th>
					<th>Inscription</th>
				</tr>
			</thead>
			<tbody>
				{% for recording in next_recordings %}
					{{ include('AppBundle:TVShow:tvshow_recording_partial.html.twig', { 'recording' : recording }) }}
				{% endfor %}

				
			</tbody>
		</table>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<h2 class="page-header">Informations Pratiques</h2>

		{{ tvShow.generalInformation | raw }}
	</div>
</div>
</div>

<div id="connectedSuscribtionModal" tabindex="-1">
</div>

<div class="modal fade" id="anonymousSuscribtionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog register-modal" role="document">
		<div class="modal-content">
			
			<div class="modal-body">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<div class="suscribtion_container text-center">
					<h3>Oups...</h3>
					<p>Vous devez être identifié pour vous inscrire à une émission.</p>
					<button type="button" class="btn btn-primary" data-dismiss="modal" >J'ai compris !</button>
				</div>
			</div>

		</div>
	</div>
</div>


{% endblock %}

{% block scripts %}
	<script src="{{ asset('assets/shared_assets/js/jquery.dataTables.min.js') }}"></script>
	<script>
		$(document).ready(function() {
			$('#events_calendar').DataTable({
				"language": {
					"lengthMenu": "Afficher _MENU_ dates par page",
					"info": "Page _PAGE_/_PAGES_",
					"emptyTable": "Aucune date n'est actuellement prévue",
					"infoEmpty": "",
					"paginate": {
						"first":      "Première page",
						"last":       "Dernière page",
						"next":       "Suivant",
						"previous":   "Précédent"
					}
				},
				"bFilter": false,

			});
			$('.connected-register-button').click(function() {

				var id = this.id;
				var url = "{{ path('request_registration_form', {'recordingID': 'recording_ID'})}}"
				url = url.replace("recording_ID", id);
				$.get(url, function(data) {

					$('#connectedSuscribtionModal').replaceWith(data);
					$('#connectedSuscribtionModal').modal();
				})});

			$('.anonymous-register-button').click(function() {
				$('#anonymousSuscribtionModal').modal();
			});
		});


	</script>
{% endblock %}